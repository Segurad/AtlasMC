Configuration:
  name: AtlasMainConfig
  properties:
    property:
    - name: defaultFilePattern
      value: "%d{yyyy-MM-dd HH:mm:ss} %p\t| %al - %m%n"
    - name: logDir
      value: ${sys:atlas.workDir:-.}/log
  thresholdFilter:
    level: debug
  appenders:
    Console:
    - name: defaultConsoleLog
      target: SYSTEM_OUT
      Filters:
        AtlasConsoleFilter: {}
      PatternLayout:
        Pattern: "%d{MM-dd HH:mm:ss} %p\t| %al - %m%n"
    - name: pluginConsoleLog
      target: SYSTEM_OUT
      Filters:
        AtlasConsoleFilter: {}
      PatternLayout:
        Pattern: "%d{MM-dd HH:mm:ss} %p\t| [Plugin] %al - %m%n"
    RollingRandomAccessFile:
    - name: defaultLogFile
      fileName: "${logDir}/latest.log"
      filePattern: "${logDir}/log_%d{yyyy-MM-dd}.log"
      PatternLayout:
        Pattern: ${defaultFilePattern}
      Policies:
        TimeBasedTriggeringPolicy: {}
        OnStartupTriggeringPolicy:
          minSize: 1
    - name: masterLogFile
      fileName: "${logDir}/master/latest.log"
      filePattern: "${logDir}/master/log_%d{yyyy-MM-dd}.log"
      PatternLayout:
        Pattern: ${defaultFilePattern}
      Policies:
        TimeBasedTriggeringPolicy: {}
        OnStartupTriggeringPolicy:
            minSize: 1
    - name: proxyLogFile
      fileName: "${logDir}/proxy/latest.log"
      filePattern: "${logDir}/proxy/log_%d{yyyy-MM-dd}.log"
      PatternLayout:
        Pattern: ${defaultFilePattern}
      Policies:
        TimeBasedTriggeringPolicy: {}
        OnStartupTriggeringPolicy:
          minSize: 1
    - name: serverLogFile
      fileName: "${logDir}/server/latest.log"
      filePattern: "${logDir}/server/log_%d{yyyy-MM-dd}.log"
      PatternLayout:
        Pattern: ${defaultFilePattern}
      Policies:
        TimeBasedTriggeringPolicy: {}
        OnStartupTriggeringPolicy:
          minSize: 1
    - name: pluginLogFile
      fileName: "${logDir}/plugin/latest.log"
      filePattern: "${logDir}/plugin/log_%d{yyyy-MM-dd}.log"
      PatternLayout:
        Pattern: "%d{yyyy-MM-dd HH:mm:ss} %p\t| [Plugin] %al - %m%n"
      Policies:
        TimeBasedTriggeringPolicy: {}
        OnStartupTriggeringPolicy:
          minSize: 1
 
  Loggers:
    logger:
    - name: Atlas-Master
      level: debug
      additivity: false
      AppenderRef:
      - ref: masterLogFile
      - ref: defaultConsoleLog
    - name: Atlas
      level: debug
      additivity: false
      AppenderRef:
      - ref: defaultLogFile
      - ref: defaultConsoleLog
    - name: Proxy
      level: debug
      additivity: false
      AppenderRef:
      - ref: proxyLogFile
      - ref: defaultConsoleLog
    - name: Server
      level: debug
      additivity: false
      AppenderRef:
      - ref: serverLogFile
      - ref: defaultConsoleLog
    - name: Plugin
      level: debug
      additivity: false
      AppenderRef:
      - ref: pluginLogFile
      - ref: pluginConsoleLog
    Root:
      level: info
      AppenderRef:
        ref: defaultConsoleLog